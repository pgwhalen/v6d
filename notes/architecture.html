<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta property="og:title" content="Architecture" />
<meta property="og:type" content="website" />
<meta property="og:url" content="notes/architecture.html" />
<meta property="og:site_name" content="vineyard" />
<meta property="og:description" content="Overview: The following figure illustrates the architecture of Vineyard. Architecture of Vineyard Architecture of Vineyard, Server side: On the server (daemon) side (i.e., the aforementioned Vineya..." />
<meta property="og:image:width" content="1146" />
<meta property="og:image:height" content="600" />
<meta property="og:image" content="/_images/social_previews/summary_notes_architecture_d259b4fa.png" />
<meta property="og:image:alt" content="Overview: The following figure illustrates the architecture of Vineyard. Architecture of Vineyard Architecture of Vineyard, Server side: On the server (daemo..." />
<meta name="description" content="Overview: The following figure illustrates the architecture of Vineyard. Architecture of Vineyard Architecture of Vineyard, Server side: On the server (daemon) side (i.e., the aforementioned Vineya..." />
<meta name="twitter:card" content="summary_large_image" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Key Concepts" href="key-concepts.html" /><link rel="prev" title="Getting Started" href="getting-started.html" />

    <link rel="shortcut icon" href="../_static/vineyard.ico"/><!-- Generated with Sphinx 5.3.0 and Furo 2023.03.27 -->
        <title>Architecture - Vineyard</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=fad236701ea90a88636c2a8c73b44ae642ed2a53" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    <link rel="stylesheet" type="text/css" href="../_static/css/brands.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/v4-shims.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/panels.css" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
<script>
  document.body.dataset.theme = "light";
</script>

<script>
  function ready(callback) {
    if (document.readyState!='loading') {
      // in case the document is already rendered
      callback();
    } else if (document.addEventListener) {
      // modern browsers
      document.addEventListener('DOMContentLoaded', callback);
    } else document.attachEvent('onreadystatechange', function() {
      // IE <= 8
      if (document.readyState=='complete') {
        callback();
      }
    });
  }

  ready(function() {
    let coll = document.getElementsByClassName("admonition-details");
    for (let i = 0; i < coll.length; i++) {
      let titles = coll[i].getElementsByClassName("admonition-title");
      if (titles.length == 0) {
        continue;
      }
      titles[0].addEventListener("click", function () {
        this.parentElement.classList.toggle("active");

        if (this.parentElement.classList.contains("active")) {
          this.getElementsByClassName("admonition-caret")[0].innerText = " - (click to collapse)";
        } else {
          this.getElementsByClassName("admonition-caret")[0].innerText = " + (click to expand)";
        }
      });
      titles[0].appendChild(document.createElement("br"));
      let caret = document.createElement("span");
      caret.classList.add("admonition-caret");
      caret.innerText = " + (click to expand)";
      titles[0].appendChild(caret);
    }
  });
</script>


<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Vineyard</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/vineyard-logo-h.png" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">User Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal">Architecture</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="key-concepts.html">Key Concepts</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="key-concepts/objects.html">Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="key-concepts/vcdl.html">Code Generation for Boilerplate</a></li>
<li class="toctree-l2"><a class="reference internal" href="key-concepts/data-accessing.html">Data Accessing</a></li>
<li class="toctree-l2"><a class="reference internal" href="key-concepts/streams.html">Streams in Vineyard</a></li>
<li class="toctree-l2"><a class="reference internal" href="key-concepts/io-drivers.html">I/O Drivers</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Cloud-Native</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cloud-native/deploy-kubernetes.html">Deploy on Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="cloud-native/vineyard-operator.html">Vineyard Operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="cloud-native/vineyardctl.html">Command-line tool</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/data-processing.html">Data processing</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/data-processing/using-objects-python.html">Sharing Python Objects with Vineyard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/data-processing/python-sharedmemory.html"><code class="code docutils literal notranslate"><span class="pre">multiprocessing.shared_memory</span></code> in Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/data-processing/distributed-learning.html">Distributed Learning with Vineyard</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/kubernetes.html">Vineyard on Kubernetes</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/kubernetes/using-vineyard-operator.html">Use vineyard operator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/kubernetes/ml-pipeline-mars-pytorch.html">Machine learning with Vineyard on Kubernetes</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../tutorials/extending.html">Extending vineyard</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/extending/define-datatypes-python.html">Define Data Types in Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/extending/define-datatypes-cpp.html">Defining Custom Data Types in C++</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Integration</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="integration-bigdata.html">Big-data on Vineyard</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="integration/dask.html">Dask on Vineyard</a></li>
<li class="toctree-l2"><a class="reference internal" href="integration/ml.html">Machine Learning with Vineyard</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="integration-orchestration.html">Workflow orchestration</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="integration/airflow.html">Airflow on Vineyard</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="references.html">API Reference</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="references/python-api.html">Python API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="references/cpp-api.html">C++ API Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="references/ctl.html">Vineyard Cli</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Guides</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="developers.html">Getting Involved</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="developers/build-from-source.html">Building from source</a></li>
<li class="toctree-l2"><a class="reference internal" href="developers/contributing.html">Contributing to vineyard</a></li>
<li class="toctree-l2"><a class="reference internal" href="developers/troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="developers/roadmap.html">Roadmap</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="developers/faq.html">Frequently Asked Questions</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/v6d-io/v6d/edit/main/docs/notes/architecture.rst" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <div class="section" id="architecture">
<span id="architecture-of-vineyard"></span><h1>Architecture<a class="headerlink" href="#architecture" title="Permalink to this heading">#</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">#</a></h2>
<p>The following figure illustrates the architecture of Vineyard.</p>
<div class="figure align-default" id="id2">
<a class="reference internal image-reference" href="../_images/vineyard_arch.jpg"><img alt="Architecture of Vineyard" src="../_images/vineyard_arch.jpg" style="width: 75%;" /></a>
<p class="caption"><span class="caption-text">Architecture of Vineyard</span><a class="headerlink" href="#id2" title="Permalink to this image">#</a></p>
</div>
<div class="section" id="server-side">
<h3>Server side<a class="headerlink" href="#server-side" title="Permalink to this heading">#</a></h3>
<p>On the server (daemon) side (i.e., the aforementioned Vineyard instance), there are
three primary components:</p>
<ol class="arabic">
<li><p>The <strong>shared memory</strong> is the memory space in Vineyard that is shared with Vineyard
clients via the UNIX domain socket through memory mapping.</p>
<p>As previously mentioned, the partitions of the distributed data reside in the
shared memory of the corresponding Vineyard instance in the cluster.</p>
</li>
<li><p>The <strong>metadata manager</strong> is responsible for managing the metadata of the data stored
in Vineyard.</p>
<p>The metadata manager maintains the metadata (structures, layouts, and properties) of
the data to provide high-level abstractions (e.g., graphs, tensors, dataframes).
The metadata managers in a Vineyard cluster communicate with each other through
the backend key-value store, such as etcd server, to ensure the consistency of the
distributed data stored in Vineyard.</p>
</li>
<li><p>The <strong>IPC/RPC servers</strong> manage the IPC/RPC connections from Vineyard
clients for data sharing.</p>
<p>Specifically, the client can obtain the metadata of the data stored in Vineyard through
both IPC and RPC connections. However, to access the data partition, the client must connect
to the Vineyard instance via the UNIX domain socket, as the data
sharing occurs through the system call of memory mapping, which requires the client to be on
the same machine as the Vineyard instance.</p>
</li>
</ol>
</div>
<div class="section" id="client-side">
<span id="id1"></span><h3>Client side<a class="headerlink" href="#client-side" title="Permalink to this heading">#</a></h3>
<p>On the client side, the core component is the <strong>Vineyard client</strong>. The client side
includes both low-level APIs for accessing Vineyard instances in a precise
manner and high-level APIs for data structure sharing, manipulation, and
routine reuse (e.g., I/O drivers). More specifically,</p>
<ol class="arabic">
<li><p>The <strong>IPC client</strong> communicates with <em>local</em> Vineyard instances by connecting
to the UNIX domain socket.</p>
<p>The IPC client is used to establish an IPC connection between the Vineyard server and
the client, enabling memory-sharing (by <code class="code docutils literal notranslate"><span class="pre">mmap</span></code> and transferring the file descriptor)
between the Vineyard server and the computing engines.</p>
</li>
<li><p>The <strong>RPC client</strong> communicates with <em>remote</em> Vineyard instances by connecting
to the TCP port that the Vineyard daemon is bound to.</p>
<p>Unlike the IPC client, the RPC doesn’t allow memory-sharing between processes
but is useful for retrieving the metadata of objects in the Vineyard cluster.</p>
</li>
<li><p>The <strong>builders and resolvers</strong> for out-of-the-box high-level data abstractions
offer a convenient way for applications to consume objects in Vineyard and
produce result objects into Vineyard.</p>
<p>The builders and resolvers adopt an extensible design where users can register
their own builders and resolvers for their newly defined data types, as well as
new builders and resolvers that build ad-hoc engine-specific data structures
as Vineyard objects and wrap Vineyard objects as engine-specific data types
at a low cost.</p>
<p>The builders, resolvers, and the registry are part of the language-specific
SDKs of Vineyard. Currently, Python and C++ are officially supported, and the Rust
and Go SDKs are under heavy development.</p>
</li>
<li><p>The <strong>pluggable drivers</strong> assign specific functionalities to certain types of data
in Vineyard.</p>
<p>In particular, I/O drivers synchronize with external storages such as databases and file
systems to read data into and write data from Vineyard, while partition and
re-partition drivers reorganize the distributed graphs stored in Vineyard to
balance the workload.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The drivers typically employ the low-level APIs for precise operations.</p>
</div>
</li>
<li><p><strong>Object migration</strong> is the mechanism implemented on the client side to
migrate objects between Vineyard instances in a cluster. Object migration
is usually needed when the computing engines cannot be scheduled to co-locate
with the data required by the jobs.</p>
<p>Object migration is implemented on the client side as a process pair where the
sender and receiver are both connected to (different) Vineyard instances and
communicate with each other using TCP to move objects between Vineyard instances.
We don’t put the object migration on the server side to decouple the functionalities
and allow users to register a more efficient object migration implemented on
their own deployment infrastructures, e.g.,leveraging RDMA and other high-performance
network technologies.</p>
</li>
</ol>
</div>
</div>
<div class="section" id="core-features">
<h2>Core features<a class="headerlink" href="#core-features" title="Permalink to this heading">#</a></h2>
<div class="section" id="zero-cost-in-memory-data-sharing">
<h3>Zero-cost in-memory data sharing<a class="headerlink" href="#zero-cost-in-memory-data-sharing" title="Permalink to this heading">#</a></h3>
<p>Vineyard provides zero-cost data sharing through memory-mapping, as data objects
in Vineyard are immutable. When an object is created, we allocate blobs in
Vineyard to store the data payload. On the other hand, when retrieving the object,
we map the blob from the Vineyard instance into the application process using
inter-process memory mapping techniques, ensuring that no memory copy is involved
in sharing the data payload.</p>
</div>
<div class="section" id="distributed-data-sharing-in-big-data-tasks">
<h3>Distributed data sharing in big data tasks<a class="headerlink" href="#distributed-data-sharing-in-big-data-tasks" title="Permalink to this heading">#</a></h3>
<p>By examining the practices of big data tasks such as numeric computing, machine learning,
and graph analysis, we have identified four key properties of the data involved:</p>
<ul class="simple">
<li><p>Distributed and each partitioned fragment usually fits into memory;</p></li>
<li><p>Immutable, i.e., never modified after creation;</p></li>
<li><p>With complex structure, e.g., graph in CSR format;</p></li>
<li><p>Required to share between different computation systems and programming languages.</p></li>
</ul>
<p>Vineyard is designed to address these challenges with:</p>
<ul class="simple">
<li><p>Composable design for Vineyard objects;</p></li>
<li><p>Immutable zero-cost in-memory data sharing via memory mapping;</p></li>
<li><p>Out-of-the-box high-level data abstraction for complex data structures;</p></li>
<li><p>Extensible design for builder/resolver/driver, enabling flexible cross-system and
cross-language data sharing.</p></li>
</ul>
<p>In general, Vineyard’s design choices are fully determined by addressing
the difficulties in handling large-scale distributed data in practice.</p>
</div>
<div class="section" id="out-of-the-box-high-level-data-abstraction">
<h3>Out-of-the-box high-level data abstraction<a class="headerlink" href="#out-of-the-box-high-level-data-abstraction" title="Permalink to this heading">#</a></h3>
<p>Vineyard objects are stored with structures and high-level abstractions.
For instance, a graph with CSR format in Vineyard stores the index along with
the vertices and edges, enabling operations like edge iteration based on the
index. This means users don’t have to implement the index-building
function and edge iterators themselves, which is often required in
existing big data practices.</p>
</div>
<div class="section" id="convenient-data-integration">
<h3>Convenient data integration<a class="headerlink" href="#convenient-data-integration" title="Permalink to this heading">#</a></h3>
<p>The extensible design of builder/resolver/driver allows for convenient extension
of existing Vineyard objects to different programming languages. Moreover,
with codegen tools in Vineyard, users can easily transplant their
data structures into Vineyard with only a few annotations.</p>
</div>
<div class="section" id="data-orchestration-in-a-python-notebook">
<h3>Data orchestration in a Python notebook<a class="headerlink" href="#data-orchestration-in-a-python-notebook" title="Permalink to this heading">#</a></h3>
<p>Using Vineyard as the common data orchestration engine throughout the end-to-end
big data processing, users can hold large-scale distributed data as variables
of Vineyard objects in Python. As long as the computation modules
involved provide Python APIs, users can write down the entire processing
pipeline in a Python notebook. By running the Python script, users can
manage trillions of data and different computation systems in the background
distributedly across the cluster.</p>
</div>
</div>
<div class="section" id="non-goals-and-limitations">
<h2>Non-goals and limitations<a class="headerlink" href="#non-goals-and-limitations" title="Permalink to this heading">#</a></h2>
<div class="section" id="no-mutable-objects">
<h3><em>NO</em> mutable objects<a class="headerlink" href="#no-mutable-objects" title="Permalink to this heading">#</a></h3>
<p>Once a Vineyard object is created and sealed in the Vineyard instance, it
becomes immutable and can NOT be modified anymore. Thus, Vineyard is not
suitable for use as a data cache to store mutable data that changes
rapidly along the processing pipeline.</p>
</div>
<div class="section" id="no-instant-remote-data-accessing">
<h3><em>NO</em> instant remote data accessing<a class="headerlink" href="#no-instant-remote-data-accessing" title="Permalink to this heading">#</a></h3>
<p>The partitions of distributed data are stored distributedly in corresponding
Vineyard instances of the cluster. Only the client on the same machine can access
the data partition. In order to access a remote partition, data migration APIs of
Vineyard can be invoked to trigger the migration process, but not for instant accessing.</p>
</div>
</div>
</div>

        </article>
      </div>
      <footer>
        
<div class="related-pages">
  <a class="next-page" href="key-concepts.html">
      <div class="page-info">
        <div class="context">
          <span>Next</span>
        </div>
        <div class="title">Key Concepts</div>
      </div>
      <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
    </a>
  <a class="prev-page" href="getting-started.html">
      <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
      <div class="page-info">
        <div class="context">
          <span>Previous</span>
        </div>
        
        <div class="title">Getting Started</div>
        
      </div>
    </a>
</div>

<!-- index page doesn't have prev -->
  <hr/>

  <script src="https://giscus.app/client.js"
    data-repo="v6d-io/v6d"
    data-repo-id="MDEwOlJlcG9zaXRvcnkzMDY2MzEyMTE="
    data-category="General"
    data-category-id="MDE4OkRpc2N1c3Npb25DYXRlZ29yeTMyNDA3MTg2"
    data-mapping="pathname"
    data-strict="1"
    data-reactions-enabled="0"
    data-emit-metadata="0"
    data-input-position="bottom"
    data-theme="light"
    data-lang="en"
    data-loading="lazy"
    crossorigin="anonymous"
    async>
  </script>

<div class="bottom-of-page">
  <div class="left-details">
    <div class="copyright">
        Copyright &#169; 2020-2023, The Vineyard Authors
    </div>
    Rendered with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a href="https://github.com/pradyunsg/furo">Furo</a>
    <p>The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation,
       please see our <a href="https://www.linuxfoundation.org/trademark-usage/">Trademark Usage page</a>.
    </p>
  </div>
  <div class="right-details">
    <div class="icons"><a class="muted-link" href="https://github.com//" aria-label="On GitHub">
        <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
        </svg>
      </a>
    </div>
    <div>
      <a href="https://www.cncf.io/sandbox-projects/"><img src="https://v6d.io/_static/cncf-color.svg" alt="CLOUD NATIVE COMPUTING FOUNDATION" width="100%" style="max-width: 200px;"/></p>
    </div>
  </div>
</div>

      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal">Architecture</a><ul>
<li><a class="reference internal" href="#overview">Overview</a><ul>
<li><a class="reference internal" href="#server-side">Server side</a></li>
<li><a class="reference internal" href="#client-side">Client side</a></li>
</ul>
</li>
<li><a class="reference internal" href="#core-features">Core features</a><ul>
<li><a class="reference internal" href="#zero-cost-in-memory-data-sharing">Zero-cost in-memory data sharing</a></li>
<li><a class="reference internal" href="#distributed-data-sharing-in-big-data-tasks">Distributed data sharing in big data tasks</a></li>
<li><a class="reference internal" href="#out-of-the-box-high-level-data-abstraction">Out-of-the-box high-level data abstraction</a></li>
<li><a class="reference internal" href="#convenient-data-integration">Convenient data integration</a></li>
<li><a class="reference internal" href="#data-orchestration-in-a-python-notebook">Data orchestration in a Python notebook</a></li>
</ul>
</li>
<li><a class="reference internal" href="#non-goals-and-limitations">Non-goals and limitations</a><ul>
<li><a class="reference internal" href="#no-mutable-objects"><em>NO</em> mutable objects</a></li>
<li><a class="reference internal" href="#no-instant-remote-data-accessing"><em>NO</em> instant remote data accessing</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    </body>
</html>